<!DOCTYPE html>
<html>
    <head>
        <title> Ajax and Json | Tutorial</title>
        <style>
            body{
                font-family: sans-serif;
            }
            .ajax-container{
                width: 50%;
                margin: 50px auto;
            }
            #btnAjaxCall{
                height: 50px;
                width: 120px;
                border: none;
                border-radius: 6px;
                color: white;
                background: #3498db;
                outline: none;
                font-size: 22px;
                opacity: 0.7;
                padding: 10px;
            }
            #btnAjaxCall:hover{
                cursor: pointer;
                opacity: 1;
            }
            .item-details{
                margin-top: 10px;
                border: 1px solid #ddd;
                padding: 6px;
            }
        </style>

    </head>

    <body>
        <div class="ajax-container">
            <input type="button" id="btnAjaxCall" value="Ajax Call" />

            <div class="display-data"> </div> <!-- แสดงผลข้อมูลตรงนี้ -->
        </div>
    </body>

    <script src="https://code.jquery.com/jquery-3.1.1.min.js"
            integrity="sha256-hVVnYaiADRTO2PzUGmuLJr8BLUSjGIZsDYGmIJLv2b8="
    crossorigin="anonymous"></script>

    <script>
        var count = 0;

        $("#btnAjaxCall").click(function () {
            fetchDataAndDisplay();
        });

        function fetchDataAndDisplay() {
            $.ajax({
                url: "http://localhost:3000/products",
                method: "GET",
                dataType: "json"
            }).done(function (data) {
                $(".display-data").empty();
                $.each(data.products, function (i) {
                    $(".display-data").append('Id: '+data.products[i]._id +'<br/>'+
                            'Name: '+data.products[i].name +'<br/>'+
                            'Price: '+data.products[i].price +'<br/>'
                            );
                });
            });
        }
    </script>

</html>